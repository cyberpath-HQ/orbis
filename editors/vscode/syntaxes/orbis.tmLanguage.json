{
    "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
    "name": "Orbis DSL",
    "patterns": [
        { "include": "#comments" },
        { "include": "#imports" },
        { "include": "#top-level-blocks" },
        { "include": "#strings" },
        { "include": "#numbers" },
        { "include": "#constants" },
        { "include": "#operators" }
    ],
    "repository": {
        "comments": {
            "patterns": [
                {
                    "name": "comment.line.double-slash.orbis",
                    "match": "//.*$"
                },
                {
                    "name": "comment.block.orbis",
                    "begin": "/\\*",
                    "end": "\\*/",
                    "captures": {
                        "0": { "name": "punctuation.definition.comment.orbis" }
                    }
                },
                {
                    "name": "comment.line.documentation.orbis",
                    "match": "///.*$"
                }
            ]
        },
        "imports": {
            "patterns": [
                {
                    "name": "meta.import.orbis",
                    "begin": "\\b(import)\\b",
                    "beginCaptures": {
                        "1": { "name": "keyword.control.import.orbis" }
                    },
                    "end": ";|$",
                    "patterns": [
                        { "include": "#strings" },
                        {
                            "name": "keyword.control.from.orbis",
                            "match": "\\b(from)\\b"
                        },
                        {
                            "name": "entity.name.type.orbis",
                            "match": "\\b[A-Z][a-zA-Z0-9_]*\\b"
                        },
                        {
                            "name": "keyword.control.as.orbis",
                            "match": "\\b(as)\\b"
                        }
                    ]
                },
                {
                    "name": "meta.import.rust.orbis",
                    "begin": "\\b(use)\\b",
                    "beginCaptures": {
                        "1": { "name": "keyword.control.use.orbis" }
                    },
                    "end": ";|$",
                    "patterns": [
                        {
                            "name": "entity.name.namespace.orbis",
                            "match": "\\b[a-z_][a-zA-Z0-9_]*\\b"
                        },
                        {
                            "name": "punctuation.separator.namespace.orbis",
                            "match": "::"
                        }
                    ]
                }
            ]
        },
        "top-level-blocks": {
            "patterns": [
                {
                    "name": "meta.block.page.orbis",
                    "begin": "\\b(page)\\b",
                    "beginCaptures": {
                        "1": { "name": "keyword.declaration.page.orbis" }
                    },
                    "end": "(?=\\})",
                    "patterns": [
                        { "include": "#block-content" }
                    ]
                },
                {
                    "name": "meta.block.state.orbis",
                    "begin": "\\b(state)\\b",
                    "beginCaptures": {
                        "1": { "name": "keyword.declaration.state.orbis" }
                    },
                    "end": "(?=\\})",
                    "patterns": [
                        { "include": "#decorators" },
                        { "include": "#state-declarations" }
                    ]
                },
                {
                    "name": "meta.block.hooks.orbis",
                    "begin": "\\b(hooks)\\b",
                    "beginCaptures": {
                        "1": { "name": "keyword.declaration.hooks.orbis" }
                    },
                    "end": "(?=\\})",
                    "patterns": [
                        { "include": "#decorators" },
                        { "include": "#actions" }
                    ]
                },
                {
                    "name": "meta.block.template.orbis",
                    "begin": "\\b(template)\\b",
                    "beginCaptures": {
                        "1": { "name": "keyword.declaration.template.orbis" }
                    },
                    "end": "(?=\\})",
                    "patterns": [
                        { "include": "#template-content" }
                    ]
                },
                {
                    "name": "meta.block.fragment.orbis",
                    "begin": "\\b(fragment)\\s+([A-Z][a-zA-Z0-9_]*)",
                    "beginCaptures": {
                        "1": { "name": "keyword.declaration.fragment.orbis" },
                        "2": { "name": "entity.name.function.fragment.orbis" }
                    },
                    "end": "(?=\\})",
                    "patterns": [
                        { "include": "#parameters" },
                        { "include": "#template-content" }
                    ]
                },
                {
                    "name": "meta.block.interface.orbis",
                    "begin": "\\b(interface)\\s+([A-Z][a-zA-Z0-9_]*)",
                    "beginCaptures": {
                        "1": { "name": "keyword.declaration.interface.orbis" },
                        "2": { "name": "entity.name.type.interface.orbis" }
                    },
                    "end": "(?=\\})",
                    "patterns": [
                        { "include": "#interface-members" }
                    ]
                },
                {
                    "name": "meta.block.styles.orbis",
                    "begin": "\\b(styles)\\b",
                    "beginCaptures": {
                        "1": { "name": "keyword.declaration.styles.orbis" }
                    },
                    "end": "(?=\\})",
                    "patterns": [
                        { "include": "#css-content" }
                    ]
                },
                {
                    "name": "meta.export.orbis",
                    "begin": "\\b(export)\\b",
                    "beginCaptures": {
                        "1": { "name": "keyword.control.export.orbis" }
                    },
                    "end": "(?=\\})|;|$",
                    "patterns": [
                        {
                            "name": "keyword.declaration.orbis",
                            "match": "\\b(fragment|interface|const)\\b"
                        },
                        { "include": "#top-level-blocks" }
                    ]
                }
            ]
        },
        "decorators": {
            "patterns": [
                {
                    "name": "meta.decorator.orbis",
                    "match": "(@)(computed|validate|mount|unmount|watch)(\\([^)]*\\))?",
                    "captures": {
                        "1": { "name": "punctuation.decorator.orbis" },
                        "2": { "name": "entity.name.decorator.orbis" },
                        "3": { "name": "meta.decorator.arguments.orbis" }
                    }
                }
            ]
        },
        "state-declarations": {
            "patterns": [
                {
                    "name": "meta.declaration.state.orbis",
                    "match": "\\b([a-z_][a-zA-Z0-9_]*)\\s*(:)\\s*([A-Z][a-zA-Z0-9_<>\\[\\],\\s]*)?\\s*(=)?",
                    "captures": {
                        "1": { "name": "variable.other.orbis" },
                        "2": { "name": "punctuation.separator.type.orbis" },
                        "3": { "name": "entity.name.type.orbis" },
                        "4": { "name": "keyword.operator.assignment.orbis" }
                    }
                }
            ]
        },
        "template-content": {
            "patterns": [
                { "include": "#components" },
                { "include": "#control-flow" },
                { "include": "#expressions" },
                { "include": "#slots" }
            ]
        },
        "components": {
            "patterns": [
                {
                    "name": "meta.tag.orbis",
                    "begin": "(<)([A-Z][a-zA-Z0-9_]*)",
                    "beginCaptures": {
                        "1": { "name": "punctuation.definition.tag.begin.orbis" },
                        "2": { "name": "entity.name.tag.component.orbis" }
                    },
                    "end": "(/?>)",
                    "endCaptures": {
                        "1": { "name": "punctuation.definition.tag.end.orbis" }
                    },
                    "patterns": [
                        { "include": "#tag-attributes" },
                        { "include": "#tag-events" }
                    ]
                },
                {
                    "name": "meta.tag.close.orbis",
                    "match": "(</?)([A-Z][a-zA-Z0-9_]*)(>)",
                    "captures": {
                        "1": { "name": "punctuation.definition.tag.begin.orbis" },
                        "2": { "name": "entity.name.tag.component.orbis" },
                        "3": { "name": "punctuation.definition.tag.end.orbis" }
                    }
                }
            ]
        },
        "tag-attributes": {
            "patterns": [
                {
                    "name": "meta.attribute.orbis",
                    "match": "\\b([a-z][a-zA-Z0-9_]*)\\s*(=)",
                    "captures": {
                        "1": { "name": "entity.other.attribute-name.orbis" },
                        "2": { "name": "punctuation.separator.key-value.orbis" }
                    }
                },
                { "include": "#strings" },
                { "include": "#expressions" }
            ]
        },
        "tag-events": {
            "patterns": [
                {
                    "name": "meta.event.orbis",
                    "match": "(@)([a-z][a-zA-Z0-9_]*)\\s*(=)",
                    "captures": {
                        "1": { "name": "punctuation.definition.event.orbis" },
                        "2": { "name": "entity.name.event.orbis" },
                        "3": { "name": "punctuation.separator.key-value.orbis" }
                    }
                }
            ]
        },
        "control-flow": {
            "patterns": [
                {
                    "name": "keyword.control.conditional.orbis",
                    "match": "\\b(if|else)\\b"
                },
                {
                    "name": "keyword.control.loop.orbis",
                    "match": "\\b(for|in)\\b"
                },
                {
                    "name": "keyword.control.switch.orbis",
                    "match": "\\b(when)\\b"
                }
            ]
        },
        "expressions": {
            "patterns": [
                {
                    "name": "meta.expression.interpolation.orbis",
                    "begin": "\\{",
                    "beginCaptures": {
                        "0": { "name": "punctuation.definition.expression.begin.orbis" }
                    },
                    "end": "\\}",
                    "endCaptures": {
                        "0": { "name": "punctuation.definition.expression.end.orbis" }
                    },
                    "patterns": [
                        { "include": "#expression-content" }
                    ]
                }
            ]
        },
        "expression-content": {
            "patterns": [
                { "include": "#strings" },
                { "include": "#numbers" },
                { "include": "#constants" },
                { "include": "#operators" },
                { "include": "#function-calls" },
                {
                    "name": "variable.other.orbis",
                    "match": "\\b[a-z_][a-zA-Z0-9_]*\\b"
                },
                {
                    "name": "variable.other.member.orbis",
                    "match": "\\.[a-z_][a-zA-Z0-9_]*\\b"
                }
            ]
        },
        "actions": {
            "patterns": [
                {
                    "name": "meta.action.api.orbis",
                    "match": "\\b(api)\\.([a-z_][a-zA-Z0-9_]*)\\.([a-z_][a-zA-Z0-9_]*)",
                    "captures": {
                        "1": { "name": "support.class.api.orbis" },
                        "2": { "name": "entity.name.type.orbis" },
                        "3": { "name": "entity.name.function.orbis" }
                    }
                },
                {
                    "name": "meta.action.toast.orbis",
                    "match": "\\b(toast)\\.(success|error|warning|info)",
                    "captures": {
                        "1": { "name": "support.class.toast.orbis" },
                        "2": { "name": "support.function.toast.orbis" }
                    }
                },
                {
                    "name": "meta.action.router.orbis",
                    "match": "\\b(router)\\.(navigate|back|forward|replace)",
                    "captures": {
                        "1": { "name": "support.class.router.orbis" },
                        "2": { "name": "support.function.router.orbis" }
                    }
                },
                {
                    "name": "meta.action.console.orbis",
                    "match": "\\b(console)\\.(log|info|warn|error|debug)",
                    "captures": {
                        "1": { "name": "support.class.console.orbis" },
                        "2": { "name": "support.function.console.orbis" }
                    }
                }
            ]
        },
        "function-calls": {
            "patterns": [
                {
                    "name": "meta.function-call.orbis",
                    "match": "\\b([a-z_][a-zA-Z0-9_]*)\\s*\\(",
                    "captures": {
                        "1": { "name": "entity.name.function.orbis" }
                    }
                }
            ]
        },
        "interface-members": {
            "patterns": [
                {
                    "name": "meta.interface.member.orbis",
                    "match": "\\b([a-z_][a-zA-Z0-9_]*)(\\?)?\\s*(:)\\s*([A-Z][a-zA-Z0-9_<>\\[\\],\\s]*)",
                    "captures": {
                        "1": { "name": "variable.other.property.orbis" },
                        "2": { "name": "keyword.operator.optional.orbis" },
                        "3": { "name": "punctuation.separator.type.orbis" },
                        "4": { "name": "entity.name.type.orbis" }
                    }
                }
            ]
        },
        "parameters": {
            "patterns": [
                {
                    "name": "meta.parameter.orbis",
                    "match": "\\b([a-z_][a-zA-Z0-9_]*)\\s*(:)\\s*([A-Z][a-zA-Z0-9_<>\\[\\],\\s]*)?",
                    "captures": {
                        "1": { "name": "variable.parameter.orbis" },
                        "2": { "name": "punctuation.separator.type.orbis" },
                        "3": { "name": "entity.name.type.orbis" }
                    }
                }
            ]
        },
        "slots": {
            "patterns": [
                {
                    "name": "meta.slot.orbis",
                    "match": "(<)(slot)(?:\\s*:\\s*([a-z_][a-zA-Z0-9_]*))?(\\s*/?>)",
                    "captures": {
                        "1": { "name": "punctuation.definition.tag.begin.orbis" },
                        "2": { "name": "keyword.other.slot.orbis" },
                        "3": { "name": "entity.name.slot.orbis" },
                        "4": { "name": "punctuation.definition.tag.end.orbis" }
                    }
                }
            ]
        },
        "css-content": {
            "patterns": [
                {
                    "name": "meta.css.directive.orbis",
                    "match": "(@)(apply|theme|variant|screen|layer)\\b",
                    "captures": {
                        "1": { "name": "punctuation.definition.directive.orbis" },
                        "2": { "name": "keyword.control.directive.orbis" }
                    }
                },
                {
                    "name": "entity.name.selector.orbis",
                    "match": "\\.[a-zA-Z_][a-zA-Z0-9_-]*"
                },
                {
                    "name": "variable.other.property.css.orbis",
                    "match": "[a-z-]+(?=\\s*:)"
                }
            ]
        },
        "strings": {
            "patterns": [
                {
                    "name": "string.quoted.double.orbis",
                    "begin": "\"",
                    "end": "\"",
                    "patterns": [
                        { "include": "#string-escapes" }
                    ]
                },
                {
                    "name": "string.quoted.single.orbis",
                    "begin": "'",
                    "end": "'",
                    "patterns": [
                        { "include": "#string-escapes" }
                    ]
                },
                {
                    "name": "string.template.orbis",
                    "begin": "`",
                    "end": "`",
                    "patterns": [
                        { "include": "#string-escapes" },
                        { "include": "#template-expressions" }
                    ]
                }
            ]
        },
        "string-escapes": {
            "patterns": [
                {
                    "name": "constant.character.escape.orbis",
                    "match": "\\\\."
                }
            ]
        },
        "template-expressions": {
            "patterns": [
                {
                    "name": "meta.template.expression.orbis",
                    "begin": "\\$\\{",
                    "beginCaptures": {
                        "0": { "name": "punctuation.definition.template-expression.begin.orbis" }
                    },
                    "end": "\\}",
                    "endCaptures": {
                        "0": { "name": "punctuation.definition.template-expression.end.orbis" }
                    },
                    "patterns": [
                        { "include": "#expression-content" }
                    ]
                }
            ]
        },
        "numbers": {
            "patterns": [
                {
                    "name": "constant.numeric.float.orbis",
                    "match": "\\b\\d+\\.\\d+([eE][+-]?\\d+)?\\b"
                },
                {
                    "name": "constant.numeric.integer.hexadecimal.orbis",
                    "match": "\\b0x[0-9a-fA-F]+\\b"
                },
                {
                    "name": "constant.numeric.integer.binary.orbis",
                    "match": "\\b0b[01]+\\b"
                },
                {
                    "name": "constant.numeric.integer.decimal.orbis",
                    "match": "\\b\\d+\\b"
                }
            ]
        },
        "constants": {
            "patterns": [
                {
                    "name": "constant.language.boolean.true.orbis",
                    "match": "\\btrue\\b"
                },
                {
                    "name": "constant.language.boolean.false.orbis",
                    "match": "\\bfalse\\b"
                },
                {
                    "name": "constant.language.null.orbis",
                    "match": "\\bnull\\b"
                },
                {
                    "name": "constant.language.undefined.orbis",
                    "match": "\\bundefined\\b"
                }
            ]
        },
        "operators": {
            "patterns": [
                {
                    "name": "keyword.operator.arrow.orbis",
                    "match": "=>"
                },
                {
                    "name": "keyword.operator.comparison.orbis",
                    "match": "===|!==|==|!=|<=|>="
                },
                {
                    "name": "keyword.operator.logical.orbis",
                    "match": "&&|\\|\\||!"
                },
                {
                    "name": "keyword.operator.arithmetic.orbis",
                    "match": "\\+|-|\\*|/|%"
                },
                {
                    "name": "keyword.operator.assignment.orbis",
                    "match": "=|\\+=|-=|\\*=|/="
                },
                {
                    "name": "keyword.operator.ternary.orbis",
                    "match": "\\?|:"
                },
                {
                    "name": "keyword.operator.nullish.orbis",
                    "match": "\\?\\?"
                },
                {
                    "name": "keyword.operator.optional-chaining.orbis",
                    "match": "\\?\\."
                },
                {
                    "name": "keyword.operator.range.orbis",
                    "match": "\\.\\."
                },
                {
                    "name": "keyword.operator.pipe.orbis",
                    "match": "\\|>"
                }
            ]
        },
        "block-content": {
            "patterns": [
                { "include": "#strings" },
                { "include": "#numbers" },
                { "include": "#constants" },
                {
                    "name": "entity.other.attribute-name.orbis",
                    "match": "\\b(id|title|route|layout|icon|description|version)\\b"
                }
            ]
        }
    },
    "scopeName": "source.orbis"
}
