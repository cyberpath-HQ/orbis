---
sidebar_position: 4
title: Page Definitions
description: Configuring UI pages in plugins
---

import CodeBlock from '@/components/mdx/CodeBlock.astro';


# Page Definitions

Pages are the primary way plugins provide user interfaces. Each page has its own route, state, and layout.

## Page Structure

<CodeBlock lang="json">
```json
{
  "pages": [
    {
      "id": "my-page",
      "title": "My Page",
      "route": "/my-plugin/page",
      "icon": "FileText",
      "state": { ... },
      "layout": { ... },
      "onMount": [ ... ],
      "onUnmount": [ ... ]
    }
  ]
}
```
</CodeBlock>

## Required Fields

### id

Unique identifier within the plugin.

<CodeBlock lang="json">
```json
"id": "dashboard"
```
</CodeBlock>

Used for internal references and debugging.

### title

Display title shown in navigation.

<CodeBlock lang="json">
```json
"title": "Dashboard"
```
</CodeBlock>

Supports expressions:
<CodeBlock lang="json">
```json
"title": "{{state.userName}}'s Dashboard"
```
</CodeBlock>

### route

URL path for the page.

<CodeBlock lang="json">
```json
"route": "/my-plugin/dashboard"
```
</CodeBlock>

#### Route Patterns

| Pattern | Example | Description |
|---------|---------|-------------|
| Static | `/my-plugin` | Fixed path |
| Nested | `/my-plugin/settings` | Nested path |
| Parameter | `/my-plugin/items/:id` | Dynamic segment |
| Catch-all | `/my-plugin/*` | Match remaining path |

#### Route Parameters

Access in expressions:
<CodeBlock lang="json">
```json
"route": "/items/:itemId",
"layout": {
  "type": "Text",
  "content": "Viewing item: {{params.itemId}}"
}
```
</CodeBlock>

### layout

Root component schema defining the UI.

<CodeBlock lang="json">
```json
"layout": {
  "type": "Container",
  "className": "p-6",
  "children": [
    { "type": "Heading", "text": "Welcome" }
  ]
}
```
</CodeBlock>

See [Components](../components/overview) for all available components.

## Optional Fields

### icon

Icon displayed in navigation (from lucide-react).

<CodeBlock lang="json">
```json
"icon": "LayoutDashboard"
```
</CodeBlock>

Common icons:
- `Home`, `Settings`, `User`, `Users`
- `FileText`, `FolderOpen`, `Database`
- `ChartBar`, `Activity`, `Bell`
- `Plus`, `Edit`, `Trash`, `Search`

Browse all at [lucide.dev](https://lucide.dev/icons).

### state

Page state definition.

<CodeBlock lang="json">
```json
"state": {
  "items": {
    "type": "array",
    "default": []
  },
  "selectedItem": {
    "type": "object",
    "default": null,
    "nullable": true
  },
  "isLoading": {
    "type": "boolean",
    "default": false
  },
  "searchQuery": {
    "type": "string",
    "default": ""
  },
  "count": {
    "type": "number",
    "default": 0
  }
}
```
</CodeBlock>

#### State Field Types

| Type | Description | Default |
|------|-------------|---------|
| `string` | Text value | `""` |
| `number` | Numeric value | `0` |
| `boolean` | True/false | `false` |
| `object` | Key-value map | `{}` |
| `array` | List of items | `[]` |

### onMount

Actions to execute when page loads.

<CodeBlock lang="json">
```json
"onMount": [
  {
    "type": "set_loading",
    "loading": true
  },
  {
    "type": "call_api",
    "api": "my-plugin.getData",
    "onSuccess": [
      { "type": "update_state", "path": "items", "value": "$response.data" },
      { "type": "set_loading", "loading": false }
    ],
    "onError": [
      { "type": "showToast", "message": "Failed to load data", "level": "error" },
      { "type": "set_loading", "loading": false }
    ]
  }
]
```
</CodeBlock>

Common patterns:
- Fetch initial data
- Initialize from URL parameters
- Set up subscriptions

### onUnmount

Actions to execute when leaving the page.

<CodeBlock lang="json">
```json
"onUnmount": [
  {
    "type": "update_state",
    "path": "selectedItem",
    "value": null
  }
]
```
</CodeBlock>

Common patterns:
- Clear selections
- Cancel pending requests
- Save draft data

## Layout Patterns

### Simple Page

<CodeBlock lang="json">
```json
{
  "layout": {
    "type": "Container",
    "className": "p-6 max-w-4xl mx-auto",
    "children": [
      {
        "type": "PageHeader",
        "title": "My Page",
        "subtitle": "Page description here"
      },
      {
        "type": "Card",
        "content": {
          "type": "Text",
          "content": "Page content goes here"
        }
      }
    ]
  }
}
```
</CodeBlock>

### Dashboard Layout

<CodeBlock lang="json">
```json
{
  "layout": {
    "type": "Container",
    "className": "p-6",
    "children": [
      {
        "type": "PageHeader",
        "title": "Dashboard",
        "actions": [
          { "type": "Button", "label": "New Item", "icon": "Plus" }
        ]
      },
      {
        "type": "Grid",
        "columns": { "sm": 1, "md": 2, "lg": 4 },
        "gap": "1rem",
        "className": "mb-6",
        "children": [
          { "type": "StatCard", "title": "Total Users", "value": "{{state.stats.users}}" },
          { "type": "StatCard", "title": "Active Sessions", "value": "{{state.stats.sessions}}" },
          { "type": "StatCard", "title": "Revenue", "value": "${{state.stats.revenue}}" },
          { "type": "StatCard", "title": "Growth", "value": "{{state.stats.growth}}%", "changeType": "increase" }
        ]
      },
      {
        "type": "Grid",
        "columns": { "sm": 1, "lg": 2 },
        "gap": "1rem",
        "children": [
          {
            "type": "Card",
            "title": "Recent Activity",
            "content": { "type": "List", "dataSource": "state:recentActivity" }
          },
          {
            "type": "Card",
            "title": "Performance",
            "content": { "type": "Chart", "chartType": "line", "dataSource": "state:performanceData" }
          }
        ]
      }
    ]
  }
}
```
</CodeBlock>

### List/Detail Layout

**List Page:**
<CodeBlock lang="json">
```json
{
  "id": "items-list",
  "route": "/items",
  "layout": {
    "type": "Container",
    "children": [
      {
        "type": "PageHeader",
        "title": "Items",
        "actions": [
          {
            "type": "Button",
            "label": "New Item",
            "events": {
              "onClick": [{ "type": "navigate", "to": "/items/new" }]
            }
          }
        ]
      },
      {
        "type": "Table",
        "dataSource": "state:items",
        "columns": [
          { "key": "name", "label": "Name" },
          { "key": "status", "label": "Status" },
          { "key": "createdAt", "label": "Created" }
        ],
        "events": {
          "onRowClick": [
            { "type": "navigate", "to": "/items/{{$row.id}}" }
          ]
        }
      }
    ]
  }
}
```
</CodeBlock>

**Detail Page:**
<CodeBlock lang="json">
```json
{
  "id": "item-detail",
  "route": "/items/:id",
  "state": {
    "item": { "type": "object", "default": null }
  },
  "onMount": [
    {
      "type": "call_api",
      "api": "my-plugin.getItem",
      "args": { "id": "{{params.id}}" },
      "onSuccess": [
        { "type": "update_state", "path": "item", "value": "$response.data" }
      ]
    }
  ],
  "layout": {
    "type": "Container",
    "children": [
      {
        "type": "PageHeader",
        "title": "{{state.item.name}}",
        "backLink": "/items"
      },
      {
        "type": "Conditional",
        "condition": "{{state.item}}",
        "then": {
          "type": "Card",
          "content": {
            "type": "Flex",
            "direction": "column",
            "gap": "1rem",
            "children": [
              { "type": "DataDisplay", "label": "Name", "value": "{{state.item.name}}" },
              { "type": "DataDisplay", "label": "Status", "value": "{{state.item.status}}" },
              { "type": "DataDisplay", "label": "Created", "value": "{{state.item.createdAt}}" }
            ]
          }
        },
        "else": {
          "type": "Skeleton"
        }
      }
    ]
  }
}
```
</CodeBlock>

### Form Page

<CodeBlock lang="json">
```json
{
  "id": "create-item",
  "route": "/items/new",
  "state": {
    "formData": {
      "type": "object",
      "default": {
        "name": "",
        "description": "",
        "category": ""
      }
    },
    "isSubmitting": { "type": "boolean", "default": false }
  },
  "layout": {
    "type": "Container",
    "className": "p-6 max-w-2xl mx-auto",
    "children": [
      {
        "type": "PageHeader",
        "title": "Create Item",
        "backLink": "/items"
      },
      {
        "type": "Card",
        "content": {
          "type": "Form",
          "id": "create-form",
          "fields": [
            {
              "name": "name",
              "fieldType": "text",
              "label": "Name",
              "placeholder": "Enter item name",
              "bindTo": "formData.name",
              "validation": {
                "required": { "message": "Name is required" }
              }
            },
            {
              "name": "description",
              "fieldType": "textarea",
              "label": "Description",
              "placeholder": "Enter description",
              "bindTo": "formData.description"
            },
            {
              "name": "category",
              "fieldType": "select",
              "label": "Category",
              "bindTo": "formData.category",
              "options": [
                { "value": "a", "label": "Category A" },
                { "value": "b", "label": "Category B" }
              ]
            }
          ],
          "events": {
            "onSubmit": [
              { "type": "set_loading", "target": "submit", "loading": true },
              {
                "type": "call_api",
                "api": "my-plugin.createItem",
                "args": { "data": "{{state.formData}}" },
                "onSuccess": [
                  { "type": "showToast", "message": "Item created!", "level": "success" },
                  { "type": "navigate", "to": "/items" }
                ],
                "onError": [
                  { "type": "showToast", "message": "Failed to create item", "level": "error" }
                ]
              },
              { "type": "set_loading", "target": "submit", "loading": false }
            ]
          }
        }
      }
    ]
  }
}
```
</CodeBlock>

## Multiple Pages

Plugins can define multiple pages:

<CodeBlock lang="json">
```json
{
  "pages": [
    {
      "id": "dashboard",
      "title": "Dashboard",
      "route": "/my-plugin",
      "icon": "Home",
      "layout": { ... }
    },
    {
      "id": "items",
      "title": "Items",
      "route": "/my-plugin/items",
      "icon": "List",
      "layout": { ... }
    },
    {
      "id": "settings",
      "title": "Settings",
      "route": "/my-plugin/settings",
      "icon": "Settings",
      "layout": { ... }
    }
  ]
}
```
</CodeBlock>

## Best Practices

### Route Naming

<CodeBlock lang="json">
```json
// Good - namespaced routes
"/my-plugin/dashboard"
"/my-plugin/items"
"/my-plugin/items/:id"

// ‚ùå Avoid - may conflict
"/dashboard"
"/items"
```
</CodeBlock>

### State Organization

<CodeBlock lang="json">
```json
// Good - organized state
"state": {
  "data": { "type": "object" },
  "ui": {
    "type": "object",
    "default": {
      "isLoading": false,
      "selectedTab": "all"
    }
  },
  "form": {
    "type": "object",
    "default": { ... }
  }
}
```
</CodeBlock>

### Loading States

Always show loading feedback:

<CodeBlock lang="json">
```json
{
  "type": "Conditional",
  "condition": "{{state.isLoading}}",
  "then": { "type": "Skeleton" },
  "else": { "type": "Table", ... }
}
```
</CodeBlock>

### Error Handling

Handle load failures:

<CodeBlock lang="json">
```json
"onMount": [
  {
    "type": "call_api",
    "api": "getData",
    "onError": [
      { "type": "update_state", "path": "error", "value": "$error.message" }
    ]
  }
]
```
</CodeBlock>

<CodeBlock lang="json">
```json
{
  "type": "Conditional",
  "condition": "{{state.error}}",
  "then": {
    "type": "Alert",
    "variant": "destructive",
    "title": "Error",
    "message": "{{state.error}}"
  }
}
```
</CodeBlock>

## Next Steps

- **[Components](../components/overview)** - All available components
- **[Actions](../actions/overview)** - All action types
- **[Building Plugins](./building-plugins)** - Build and distribution
